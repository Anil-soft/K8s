1ï¸âƒ£ Understanding the Microservices Architecture in Your Citi Project

"Our project follows a microservices architecture where each microservice handles a specific functionality, such as payments, customer management, authentication, and reporting."
ğŸ‘‰ "There are around 15â€“20 microservices running across different environments (INT, SVC, PROD)."

âœ… Authentication Service (Manages user logins, JWT tokens, and OAuth flows)
âœ… Payments Service (Handles financial transactions, integrates with APIs)
âœ… Notifications Service (Sends SMS, email alerts using SNS)
âœ… Fraud Detection Service (Monitors transactions for anomalies)

2ï¸âƒ£ Kubernetes Pods and Scaling Strategy
ğŸ’¡ The number of pods per microservice depends on demand and resource allocation.
ğŸ’¬ Answer:
ğŸ‘‰ "Each microservice runs in its own namespace and has 3â€“5 pods in lower environments (INT, SVC) and 10â€“15 pods in production to handle traffic."
ğŸ‘‰ "The number of pods is managed using Horizontal Pod Autoscaler (HPA) based on CPU and memory usage."
ğŸ‘‰ "For example, the Payments service is critical, so it runs minimum 5 pods in PROD, scaling up to 20 pods during peak transactions."

âœ… HPA (Horizontal Pod Autoscaler) â†’ Scales pods based on CPU & memory.
âœ… Cluster Autoscaler â†’ Adds/removes worker nodes when needed.

ğŸ“Œ Example kubectl command to check running pods:
kubectl get pods -n payments-service

3ï¸âƒ£ How Are Microservices Deployed?
ğŸ’¡ Deployment strategy ensures zero downtime & rollback capability.
ğŸ’¬ Answer:
ğŸ‘‰ "We use GitHub Actions & Jenkins CI/CD pipelines for automated deployments."
ğŸ‘‰ "Microservices are deployed as Rolling Updates to ensure zero downtime."

ğŸ“Œ Example command to check deployment strategy:
kubectl describe deployment payments-service -n payments

Where Do Prometheus & Grafana Run in Kubernetes?
ğŸ‘‰ They run as separate pods in a monitoring namespace (e.g., monitoring).
ğŸ‘‰ They collect and visualize data from all microservices.

How Does Prometheus Collect Metrics?
âœ… Each microservice exposes metrics at an endpoint like /metrics.
âœ… Prometheus scrapes these metrics and stores them.
âœ… Grafana queries Prometheus and visualizes data.

ğŸ“Œ Example of Prometheus scraping a microservice:

scrape_configs:
  - job_name: 'payments-service'
    metrics_path: '/metrics'
    static_configs:
      - targets: ['payments-service:9090']
